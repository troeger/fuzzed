<!DOCTYPE html>
<html lang="en" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}FuzzEd{% endblock %}</title>

    <style type="text/css">
        {% block style %}
        @import url("{{ STATIC_URL }}lib/bootstrap/css/bootstrap.min.css");
        @import url("{{ STATIC_URL }}lib/bootstrap/css/bootstrap-responsive.min.css");
        @import url("{{ STATIC_URL }}lib/openid-selector/css/openid.css");
        @import url("{{ STATIC_URL }}css/util.css");
        @import url("{{ STATIC_URL }}css/print.css") print;
        {% endblock %}
    </style>

    {% block script %}
    {{ block.super }}
    <script src="{{ STATIC_URL }}lib/requirejs/require-jquery.js" type="text/javascript" language="javascript"></script>

    <script type="text/javascript" language="javascript">
        require.config({
            baseUrl: '{{ STATIC_URL }}script/',
            waitSeconds: 5,
            paths: {
                // require plugins
                'text' :      '../lib/requirejs/plugins/text', // required by json plugin
                'json' :      '../lib/requirejs/plugins/json',
                // jquery and plugins
                'jquery':        'require-jquery',
                'jquery.ui':     '../lib/jquery-ui-1.9.1',
                'jquery.svg':    '../lib/jquery-svg/jquery-svg-1.4.5',
                'jquery.svgdom': '../lib/jquery-svg/jquery-svgdom-1.4.5',
                // other libs
                'bootstrap':  '../lib/bootstrap/js/bootstrap-2.0.4.min',
                'underscore': '../lib/underscore/underscore-1.4.3.min',
                'jsplumb':    '../lib/jsplumb/jsplumb-1.3.16',
                'highcharts': '../lib/highcharts-2.3.5/highcharts',
                'slickgrid':  '../lib/slickgrid/slick.grid',
                'bignumber':  '../lib/bignumber/bignumber.min',

                'notations':  '../notations'

            },
            // define dependencies for libs that are not AMD compatible
            shim: {
                'jquery.ui/jquery.ui.core':       ['jquery'],
                'jquery.ui/jquery.ui.widget':     ['jquery'],
                'jquery.ui/jquery.ui.mouse':      ['jquery.ui/jquery.ui.core', 'jquery.ui/jquery.ui.widget'],
                'jquery.ui/jquery.ui.draggable':  ['jquery.ui/jquery.ui.mouse'],
                'jquery.ui/jquery.ui.droppable':  ['jquery.ui/jquery.ui.mouse'],
                'jquery.ui/jquery.ui.selectable': ['jquery.ui/jquery.ui.mouse'],
                'jquery.ui/jquery.ui.resizable':  ['jquery.ui/jquery.ui.mouse'],

                'jquery.svg':    ['jquery'],
                'jquery.svgdom': ['jquery.svg'],

                'underscore': {
                    exports: '_'
                },

                'jsplumb': {
                    deps: ['jquery', 'jquery.ui/jquery.ui.draggable', 'jquery.ui/jquery.ui.droppable'],
                    exports: 'jsPlumb'
                },

                'highcharts': {
                    deps: ['jquery'],
                    exports: 'Highcharts'
                },

                'slickgrid': {
                    deps: [
                        'jquery',
                        '../lib/slickgrid/jquery.event.drag-2.2',
                        '../lib/slickgrid/slick.core',
                        '../lib/slickgrid/slick.rowselectionmodel'
                    ],
                    exports: 'Slick'
                }
            }
        });
    </script>

    {% if messages %}
        <script type="text/javascript">
            require(['alerts'], function(Alerts) {
                jQuery(document).ready( function(){
                    {% for message in messages %}
                        Alerts.showAlert('{{ message.tags }}', '{{ message.tags.capitalize }}', '{{ message }}', 5000);
                    {% endfor %}
                });
            });
        </script>
    {% endif %}
    {% endblock %}
</head>

<body>
    <div class="navbar navbar-fixed-top no-print">
        <div class="navbar-inner">
            <div class="container">
                <a class="brand" anchor="#">FuzzEd - {{ graph }}</a>
                <ul class="nav">
                    <li>
                        <a>
                            <img id="FuzzEdProgressIndicator" src="{{ STATIC_URL }}img/ajax-loader.gif">
                            <span id="FuzzEdSaveIndicator">
                                <i class="icon-ok icon-white"></i>
                                Saved
                            </span>
                            <span id="FuzzEdErrorIndicator">
                                <i class="icon-warning-sign icon-white"></i>
                                Not saved!
                            </span>
                        </a>
                    </li>
                </ul>
                <ul class="nav pull-right">
                    {%  if user.is_authenticated %}
                    <li class="{% block navigation_home %}{% endblock %}">
                        <a href="/">
                            <i class="icon-home icon-white"></i>
                            Dashboard
                        </a>
                    </li>
                    {% block navigation_fields%}{%endblock%}
                     <li class="{% block navigation_settings %}{% endblock %}">
                        <a href="/settings">
                            <i class="icon-wrench icon-white"></i>
                            Account
                        </a>
                    </li>
                    <li  class="{% block navigation_logout %}{% endblock %}">
                        <a href="/?logout">
                            <i class="icon-off icon-white"></i>
                            Logout
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>

    {% block body %}
    <div class="container space-top">
        <div id="FuzzEdAlertContainer" class="no-print"></div>

        {% block content %}{% endblock %}

        {% block footer %}
            {% include "util/footer.html" %}
        {% endblock %}
    </div>
    {% endblock %}
</body>
</html>